---
author: aczechowski
ms.author: aaroncz
ms.prod: configuration-manager
ms.technology: configmgr-core
ms.topic: include
ms.date: 05/27/2021
---

## <a name="bkmk_invext"></a> New collection filter rule based on custom tags

<!--8939867-->

To support a more customizable collection-building experience, you can now create custom tags on devices or users. Then when you specify the criteria for collection membership, you can select these custom tags.

<!-- For example, ... -->

### Try it out!

Try to complete the tasks. Then send [Feedback](../../../../understand/product-feedback.md) with your thoughts on the feature.

To create the tags, you use the [administration service](../../../../../develop/adminservice/index.yml). The site stores the tag's name and its value in the site database as the new **Device Extension Data** class.

1. In the Configuration Manager console, [Create a collection](../../../../clients/manage/collections/create-collections.md).
1. On the Membership Rules page, in the **Add Rule** list, select **Query rule**.
1. In the Query Rule Properties window, specify a **Name** for the query. Then select **Edit Query Statement**.
1. On the **Criteria** tab of the collection query statement properties window, select the golden asterisk (`*`) to add new criteria.
1. In the Criterion Properties window, **Select** the following values:

    - Attribute class: **Device Extension Data**
    - Attribute: **PropertyName**

1. Select an **Operator** and then specify the name of the tag as the **Value**.

    At this point, the Criterion Properties window should look similar to the following image:

    <!-- screenshot -->

    Select **OK** to save the criterion.

1. Repeat the steps to add a criterion for the **PropertyValue** attribute.

    At this point, the collection Query Statement Properties window should look similar to the following image:

    <!-- screenshot -->

1. Select **OK** to close all property windows. Then complete the wizard to create the collection.

You can also use the following sample query. In the query statement properties window, select **Show Query Language** to paste the query statement.

```sql
select SMS_R_SYSTEM.ResourceID,SMS_R_SYSTEM.ResourceType,SMS_R_SYSTEM.Name,SMS_R_SYSTEM.SMSUniqueIdentifier,SMS_R_SYSTEM.ResourceDomainORWorkgroup,SMS_R_SYSTEM.Client 
from SMS_R_System inner join SMS_G_System_ExtensionData on SMS_G_System_ExtensionData.ResourceId = SMS_R_System.ResourceId 
where SMS_G_System_ExtensionData.PropertyName = "AssetTag" and SMS_G_System_ExtensionData.PropertyValue = "123456"
```

