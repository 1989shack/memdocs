---
title: [Administrative Management option added in Azure Service]
titleSuffix: Configuration Manager
description: Configure Administrative Management to enhance security of the Administrative Service Azure AD endpoints.
ms.date: 04/22/2022
ms.prod: configuration-manager
author: banreet
ms.author: banreetkaur
ms.manager: apoorvseth
---

*Applies to: Configuration Manager (Technical preview branch)*

<!--12952905-->

## Administrative Management option added in Azure Service 

A new option called Administrative Management is now added for enhanced security, when configuring Azure Services.

Selecting this option allows administrators to segment their admin privileges between Cloud Management Gateway (CMG) and Admin Service. By enabling this option, access is restricted to only Admin Service endpoints and Configuration Management clients are allowed to authenticate with the site using Azure Active Directory.

The access for other options will remain unchanged.

Note-  Cloud Management Gateway with Administrative Management service type coexistence isn't supported yet.

The updated Azure Services Wizard will look as follows -  
:::image type="content" source="../../media/12952905-AAD apps.png" alt-text="Screenshot of Administrative management option in the Azure Service Wizard":::

### Next steps 
Try out the below script for token generation and calling Admin Service.

*Reference doc for key words is [Manually register Azure AD apps - Configuration Manager | Microsoft Docs](https://docs.microsoft.com/en-us/mem/configmgr/core/clients/manage/cmg/manually-register-azure-ad-apps)*

**Pre-Requisites**  

 1. Create Client Server Apps 
 1. Download Microsoft.IdentityModel.Clients.ActiveDirectory DLL - [NuGet Gallery | Microsoft.IdentityModel.Clients.ActiveDirectory 5.2.9](https://www.nuget.org/packages/Microsoft.IdentityModel.Clients.ActiveDirectory/)
 
**Script** 
```json
{
    $clientId = "Application (client) ID"
    $resource = "App ID URI-api://{tenantId}/{string}, for example, api://5e97358c-d99c-4558-af0c-de7774091dda/ConfigMgrService"
    $tenantId = "Tenant ID GUID value"
    $adminService = “https://<ProviderFQDN>/AdminService_TokenAuth/”
    $adalPath = "Microsoft.IdentityModel.Clients.ActiveDirectory DLL Path"
    $username = “username”
    $password = "password" 
    $authority = 'https://login.microsoftonline.us/'+$tenantId
    $adal = Join-Path $adalPath "Microsoft.IdentityModel.Clients.ActiveDirectory.dll"
    [System.Reflection.Assembly]::LoadFrom($adal) | Out-Null
 
    $userCredential = New-Object Microsoft.IdentityModel.Clients.ActiveDirectory.UserPasswordCredential -ArgumentList ($username, $password)
    $authContext = New-Object "Microsoft.IdentityModel.Clients.ActiveDirectory.AuthenticationContext" -ArgumentList $authority
    $authResult = [Microsoft.IdentityModel.Clients.ActiveDirectory.AuthenticationContextIntegratedAuthExtensions]::AcquireTokenAsync($authContext,$resource,$clientId,$userCredential).Result
    $token = $authResult.AccessToken
    Set-Clipboard $token
 
    # Call admin service via powershell, can also do via Postman/Fiddler for same
    $headers = @{Authorization="Bearer $token"}
    $getcoll = $adminService + "<wmi or v1.0>/<Entity>"
    Invoke-RestMethod -Uri $getcoll -Headers $headers

}
```
