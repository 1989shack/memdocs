---
title: [Administrative Management option added in Azure Service]
titleSuffix: Configuration Manager
description: Configure Administrative Management to enhance security of the Administrative Service Azure AD endpoints.
ms.date: 04/22/2022
ms.prod: configuration-manager
author: banreet
ms.author: banreetkaur
ms.manager: apoorvseth
ms.topic : include
---



<!--12952905-->

## <a name="AdministrationServiceManagementOPtion"></a> Administration Service Management option

When configuring Azure Services, a new option called **Administration Service Management** is now added for enhanced security. Selecting this option allows administrators to segment their admin privileges between [cloud management gateway (CMG)](../../../../../cloud-attach/overview.md)  and [administration service](../../../../../../configmgr/develop/adminservice/overview.md). By enabling this option, access is restricted to only administration service endpoints. Configuration Management clients will authenticate to the site using Azure Active Directory.

> [!NOTE]
> Currently, the administration service management option can’t be used with CMG.

:::image type="content" source="../../media/12952905-administration-service-management-in-azure-services.png" alt-text="Screenshot of administration service management option in the Azure Service Wizard.":::

### Try it out!

Try to complete the tasks. Then send [Feedback](../../../../understand/product-feedback.md) with your thoughts on the feature.

Generate an Azure Active Directory(AAD) token and call the administration service by using a powershell script. The sample script and details can be found [here](https://aka.ms/cmadminservicetokensample).

<!--

#### Prerequisites

- Administration service management client server app should be present (web server and native client app)
- Download Microsoft.IdentityModel.Clients.ActiveDirectory DLL - [NuGet Gallery | Microsoft.IdentityModel.Clients.ActiveDirectory 5.2.9](https://www.nuget.org/packages/Microsoft.IdentityModel.Clients.ActiveDirectory/)

The below script needs to be ran from Windows PowerShell ISE (run as Administrator) on any machine. For the username and password use Azure Active Directory User Principal Name (UPN) name and password.

#### Script

```powershell
{
    $clientId = "Application (client) ID"
    $resource = "App ID URI-api://{tenantId}/{string}, for example, api://5e97358c-d99c-4558-af0c-de7774091dda/ConfigMgrService"
    $tenantId = "Tenant ID GUID value"
    $adminService = “https://<ProviderFQDN>/AdminService_TokenAuth/”
    $adalPath = "Microsoft.IdentityModel.Clients.ActiveDirectory DLL Path"
    $username = “username”
    $password = "password" 
    $authority = 'https://login.microsoftonline.us/'+$tenantId
    $adal = Join-Path $adalPath "Microsoft.IdentityModel.Clients.ActiveDirectory.dll"
    [System.Reflection.Assembly]::LoadFrom($adal) | Out-Null
 
    $userCredential = New-Object Microsoft.IdentityModel.Clients.ActiveDirectory.UserPasswordCredential -ArgumentList ($username, $password)
    $authContext = New-Object "Microsoft.IdentityModel.Clients.ActiveDirectory.AuthenticationContext" -ArgumentList $authority
    $authResult = [Microsoft.IdentityModel.Clients.ActiveDirectory.AuthenticationContextIntegratedAuthExtensions]::AcquireTokenAsync($authContext,$resource,$clientId,$userCredential).Result
    $token = $authResult.AccessToken
    Set-Clipboard $token
 
    # Call admin service via powershell, can also do via Postman/Fiddler for same
    $headers = @{Authorization="Bearer $token"}
    $getcoll = $adminService + "<wmi or v1.0>/<Entity>"
    Invoke-RestMethod -Uri $getcoll -Headers $headers

}
```
-->